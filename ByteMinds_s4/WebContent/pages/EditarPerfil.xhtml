<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition template="/layout/layout.xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
	
	<ui:define name="title">
		<c:set var="title" value="Editar Perfil" scope="request" />
	</ui:define>
	
	<ui:define name="content">
	 
		<f:metadata>
		    <f:viewParam name="id" value="#{gestionUsuario.id}" />  
		    <f:viewParam name="modalidad" value="#{gestionUsuario.modalidad}" />
		    <f:event type="preRenderView" listener="#{gestionUsuario.preRenderViewListener}"/> 
		</f:metadata>


	<h:form id="idDatosUsuario">
		 
		
		
		
		<p:panelGrid columns="3">

		<p:outputLabel value="Documento" />
		<p:outputLabel id="documento" value="#{gestionUsuario.usuarioSeleccionado.documento}" placeholder="Documento" />
		<p:message for="documento" style="color:red" />
		
		<p:outputLabel value="Usuario" />
		<p:inputText id="usuario" disabled="#{!gestionUsuario.modoEdicion}" value="#{gestionUsuario.usuarioSeleccionado.usuario}" placeholder="Usuario" />
		<p:message for="usuario" style="color:red" />
		
		<p:outputLabel value="Contraseña" />
<!-- 		<p:password id="contrasenia" disabled="true" value="#{gestionUsuario.usuarioSeleccionado.contrasenia}" placeholder="Contraseña" /> -->
		<h:commandLink id="contrasenia" value="**************" action="#{gestionUsuario.irACambiarContrasena()}" immediate="true" ajax="false"/>
		<p:message for="contrasenia" style="color:red" />
		
		<p:outputLabel value="Apellidos" />
		<p:inputText id="apellidos" disabled="#{!gestionUsuario.modoEdicion}" value="#{gestionUsuario.usuarioSeleccionado.apellidos}" placeholder="Apellidos" />
		<p:message for="apellidos" style="color:red" />
		
		<p:outputLabel value="Nombres" />
		<p:inputText id="nombres" disabled="#{!gestionUsuario.modoEdicion}" value="#{gestionUsuario.usuarioSeleccionado.nombres}" placeholder="Nombres" />
		<p:message for="nombres" style="color:red" />
		
		<p:outputLabel value="Fecha de Nacimiento" />
		<p:calendar id="fechaNacimiento" disabled="#{!gestionUsuario.modoEdicion}" 
		value="#{gestionUsuario.usuarioSeleccionado.fechaNacimiento}"
		maxdate="#{gestionUsuario.fechaMaximaNacimiento}"
		 placeholder="Fecha de Nacimiento"/>
		<p:message for="fechaNacimiento" style="color:red" />
		
<!-- 		<p:outputLabel value="Departamento" /> -->
<!-- 		<p:inputText id="departamento" disabled="#{!gestionUsuario.modoEdicion}" value="#{gestionUsuario.usuarioSeleccionado.departamento}" placeholder="Departamento"/> -->
<!-- 		<p:message for="departamento" style="color:red" /> -->
		<p:outputLabel value="Departamento" />
					<p:selectOneMenu id="departamento" 
					                 disabled="#{!gestionUsuario.modoEdicion}" 
					                 value="#{gestionUsuario.usuarioSeleccionado.departamento}">
					<f:selectItems value="#{combosBean.listaDepartamentos}" var="departamento" 
					                   itemLabel="#{departamento}" itemValue="#{departamento}" />
					</p:selectOneMenu>
					<p:message for="departamento" style="color:red" />
<!-- 		<p:outputLabel value="Género" /> -->
<!-- 		<p:inputText id="genero" disabled="#{!gestionUsuario.modoEdicion}" value="#{gestionUsuario.usuarioSeleccionado.genero}" placeholder="Género" /> -->
<!-- 		<p:message for="genero" style="color:red" /> -->
		<p:outputLabel value="Género" />
				<p:selectOneMenu id="genero" value="#{gestionUsuario.usuarioSeleccionado.genero}">
					<f:selectItem itemLabel="Masculino" itemValue="M" />
					<f:selectItem itemLabel="Femenino" itemValue="F" />
					<f:selectItem itemLabel="Prefiero No decirlo" itemValue="O" />
				</p:selectOneMenu>
				<p:message for="genero" style="color:red" />
		
		<p:outputLabel value="Localidad" />
		<p:inputText id="localidad" disabled="#{!gestionUsuario.modoEdicion}" value="#{gestionUsuario.usuarioSeleccionado.localidad}" placeholder="Localidad"/>
		<p:message for="localidad" style="color:red" />
		
		<p:outputLabel value="Email Institucional" />
		<p:outputLabel id="mailInstitucional" disabled="#{!gestionUsuario.modoEdicion}" value="#{gestionUsuario.usuarioSeleccionado.mail}" placeholder="Email Institucional" />
		<p:message for="mailInstitucional" style="color:red" />
		
		<p:outputLabel value="Email Personal" />
		<p:inputText id="mailPersonal" disabled="#{!gestionUsuario.modoEdicion}" value="#{gestionUsuario.usuarioSeleccionado.mailPersonal}" placeholder="Email Personal" />
		<p:message for="mailPersonal" style="color:red" />
		
		<p:outputLabel value="Teléfono" />
		<p:inputText id="telefono" disabled="#{!gestionUsuario.modoEdicion}" value="#{gestionUsuario.usuarioSeleccionado.telefono}" placeholder="Teléfono" />
		<p:message for="telefono" style="color:red" />
		
		<p:outputLabel value="ITR" />
		<p:outputLabel id="itr" value="#{gestionUsuario.usuarioSeleccionado.itr.nombre}" placeholder="ITR" />
		<p:message for="itr" style="color:red" />
		
				
		</p:panelGrid>
		
		
		<p:messages id="messages" showDetail="true" closable="true">
        	<p:autoUpdate />
    	</p:messages>
    	<h:commandButton id="idVolver" rendered="#{gestionUsuario.esAnalista()}" immediate="true=" value="Volver"	action="Usuarios" >
    		<f:ajax />
    	</h:commandButton> 
    	<h:commandButton id="idVolverEstudiante" rendered="#{gestionUsuario.esEstudiante()}" immediate="true=" value="Volver"	action="#{gestionUsuario.irPerfil()}" >
    		<f:ajax />
    	</h:commandButton> 
    	<p:commandButton id="idVolverTutor" rendered="#{gestionUsuario.esTutor()}" immediate="true=" value="Volver"	action="#{gestionUsuario.irPerfil()}" >
    		
    	</p:commandButton> 
		<h:commandButton id="idModificar"  value="Modificar" rendered="#{!gestionUsuario.modoEdicion}"	>
    			<f:param name="id" value="${gestionUsuario.id}" />
    			<f:param name="modalidad" value="update" />
    			
		</h:commandButton> 
		<h:commandButton value="Guardar cambios"	rendered="#{gestionUsuario.modoEdicion}" 
			update=":form" 	action="#{gestionUsuario.salvarCambios}">
		    	<f:param name="id" value="${gestionUsuario.id}" />
    			<f:param name="modalidad" value="update" />
		</h:commandButton>
	</h:form>

			 
			 
			 
			 

    </ui:define>
</ui:composition>

